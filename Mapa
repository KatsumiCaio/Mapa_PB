import pandas as pd
import folium
from folium.plugins import HeatMap

# Dados das cidades com latitude, longitude e peso
data = {
    'cidade': [
        'André da Rocha', 'Angatuba', 'Apiaí', 'Araçoiaba da Serra', 'Balneário Camboriú', 'Barra do Chapéu', 
        'Bofete','Bom Sucesso de Itararé', 'Borebi', 'Buri', 'Cachoeira do Sul', 
        'Campina do Monte Alegre', 'Campinas', 'Capão Bonito', 'Carambeí', 'Casca', 'Castro', 'Coronel Macedo', 
        'Corrientes', 'Dom Pedro de Alcântara', 'Eldorado', 'Guapiara', 'Guareí', 'Iaras', 'Ibiúna', 'Itaberá', 
        'Itapetininga', 'Itapeva', 'Itapirapuã Paulista', 'Itaporanga', 'Itararé', 'Jaraguari', 
        'Laranjeiras do Sul', 'Lençóis Paulista', 'Monte Mor', 'Mostardas', 'Nova Campina', 'Paraí', 
        'Paranapanema', 'Pelotas', 'Piraju', 'Pratânia', 'Protásio Alves', 'Ribeirão Branco', 
        'Ribeirão Grande', 'Rivera', 'Rolante', 'São José do Norte', 'São Miguel Arcanjo', 'São Paulo', 
        'Sengés', 'Taquarituba', 'Taquarivaí', 'Tavares', 'Ventania'
    ],
    'lat_lon': [
        '-28.63153802519502,-51.57299600019065', '-23.492186226771786,-48.414650292161085', 
        '-24.50881779881223,-48.83995814069022', '-23.50892419745724,-47.6076635929158', 
        '-26.99818298567299,-48.637244235846694', '-24.472674355417336,-49.021566041779664', 
        '-23.10267179595928,-48.257562189740226', 
        '-24.318846276668822,-49.14386662405336', '-22.569532318387658,-48.97134171855105', 
        '-23.79865432299887,-48.59735884687619', '-30.034007060026564,-52.89559767871054', 
        '-23.59164421924932,-48.477041430594234', '-22.909735944227904,-47.06343300604814', 
        '-24.002444584488003,-48.34724103552855', '-24.947622656821245,-50.122917052915696', 
        '-28.562850219233205,-51.977923099522684', '-24.805346039846498,-49.99828174777195', 
        '-23.631142155628996,-49.31306259079331', '-27.46913872580708,-58.832592913147856', 
        '-29.370003178189044,-49.8492456351218', '-24.522689848172345,-48.10926875948025', 
        '-24.186507636495264,-48.53301822250744', '-23.371165051301176,-48.18419598325274', 
        '-22.873469873643668,-49.161280168638065', '-23.65926241364494,-47.209500459710696', 
        '-23.862288667768162,-49.13654948915616', '-23.582210492771754,-48.036981757544694', 
        '-23.984962195714807,-48.88108793054638', '-24.574124033878523,-49.167509960549694', 
        '-23.704749323419257,-49.48292958488506', '-24.110021299770555,-49.3305563951626', 
        '-20.141139318678697,-54.398167519404296', '-25.402071413747947,-52.41338618806278', 
        '-22.599691122488803,-48.79375779170862', '-22.94983887313762,-47.31874489273043', 
        '-31.11094459825954,-50.923782732337635', '-24.12128548560124,-48.905817459816696', 
        '-28.597162640091476,-51.78573776246574', '-23.384643318738608,-48.718932659586564', 
        '-31.768284887949143,-52.33223481194751', '-23.196680357082055,-49.38254364988346', 
        '-22.810561224130023,-48.665502298002906', '-28.757906760875045,-51.47521648740777', 
        '-24.22171452264226,-48.7662529444699', '-24.09913972686507,-48.36388046990451', 
        '-30.90447427756227,-55.54032400318632', '-29.651319520529338,-50.576536426288364', 
        '-32.00575749689572,-52.03428032222335', '-23.88043674177839,-47.99962253094035', 
        '-23.5549796991397,-46.59125177211204', '-24.114875823463752,-49.46327979036151', 
        '-23.524724593909852,-49.24372828193613', '-23.926120844133347,-48.69781413362754', 
        '-31.289326618193023,-51.090477099089895', '-24.246457450551645,-50.24339768933184'
    ],
    'peso': [
        13080, 66800, 8864420, 22260, 3070, 891050, 116770, 5378830, 19040, 16110, 40990, 958160, 24370, 
        13912, 2791100, 14580, 800790, 441025, 803980, 126170, 23650, 9530, 63110, 27840, 795870, 1796040, 2734353, 
        51380, 61250, 14580, 800790, 13570, 304650, 48130, 144630, 1099682, 184766, 27048, 16400, 152360, 348940, 
        74880, 7166, 317830, 34380, 207138, 17280, 580797, 1002690, 95560, 8600, 90470, 243180, 605251, 15870
    ]
}

# Convertendo os dados para um DataFrame e separando latitude e longitude
data_df = pd.DataFrame(data)
data_df[['lat', 'lon']] = data_df['lat_lon'].str.split(',', expand=True).astype(float)

# Verificando os dados
print("Primeiras linhas dos dados:")
print(data_df.head())

# Cria o mapa centralizado no Brasil
mapa = folium.Map(location=[-15.788497, -47.879873], zoom_start=4)

# Prepara os dados para o HeatMap
heat_data = [[row['lat'], row['lon'], row['peso']] for index, row in data_df.iterrows()]

# Adiciona o HeatMap ao mapa
HeatMap(heat_data, radius=15, max_zoom=13).add_to(mapa)

# Salva o mapa em um arquivo HTML
mapa.save('mapa_Calor_PB.html')
